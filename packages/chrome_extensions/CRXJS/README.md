Manifest V2 → V3 字段迁移对照表
| **功能**                     | **Manifest V2 写法**                                                      | **Manifest V3 写法**                                                                         | **说明**                                          |
| -------------------------- | ----------------------------------------------------------------------- | ------------------------------------------------------------------------------------------ | ----------------------------------------------- |
| **后台脚本**                   | `json { "background": { "scripts": ["bg.js"], "persistent": true } } `  | `json { "background": { "service_worker": "bg.js", "type": "module" } } `                  | V3 用 **Service Worker**，事件驱动，不再支持常驻。            |
| **工具栏按钮（图标+Popup）**        | `json { "browser_action": { "default_popup": "popup.html" } } `         | `json { "action": { "default_popup": "popup.html" } } `                                    | `browser_action` 和 `page_action` 被合并为 `action`。 |
| **页面按钮**                   | `json { "page_action": { "default_popup": "popup.html" } } `            | （合并到 `action`）                                                                             | V3 不再区分浏览器按钮和页面按钮。                              |
| **跨域权限**                   | `"permissions": ["https://example.com/"]`                               | `"host_permissions": ["https://example.com/"]`                                             | V3 把主机权限拆分出来，更清晰。                               |
| **Web 请求拦截**               | `"permissions": ["webRequest", "webRequestBlocking"]`                   | 使用 `"declarative_net_request"`                                                             | V3 改为声明式规则，禁止直接阻塞请求。                            |
| **执行脚本**                   | `chrome.tabs.executeScript`                                             | `chrome.scripting.executeScript`                                                           | API 改名，功能差不多。                                   |
| **插入样式**                   | `chrome.tabs.insertCSS`                                                 | `chrome.scripting.insertCSS`                                                               | API 改名。                                         |
| **选项页**                    | `"options_page": "options.html"`                                        | `"options_ui": { "page": "options.html", "open_in_tab": true }`                            | V3 推荐用 `options_ui`，更灵活。                        |
| **内容安全策略**                 | `"content_security_policy": "script-src 'self'; object-src 'self'"`     | `"content_security_policy": { "extension_pages": "script-src 'self'; object-src 'self'" }` | V3 写法不同，并且默认禁止远程代码。                             |
| **远程代码**                   | 允许远程脚本（不推荐）                                                             | **完全禁止远程代码**                                                                               | 所有 JS 必须打包在扩展里，不能用 CDN 直接引。                     |
| **事件页（persistent: false）** | `json { "background": { "scripts": ["bg.js"], "persistent": false } } ` | （合并到 Service Worker）                                                                       | V3 里直接用 Service Worker，不再有 persistent。          |
